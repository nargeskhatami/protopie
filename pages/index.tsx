import BlogCard from "@/components/Blog/BlogCard";
import Container from "@/components/Common/Container";
import Flex from "@/components/Common/Grid/Flex";
import Heading from "@/components/Common/Pack/Heading";
import Hero from "@/components/Home/Hero";
import Layout from "@/components/Layouts/Layout";
import { tokens } from "@fluentui/react-components";
import axios from "axios";
import Head from "next/head";
import Image from "next/image";
import styled from "styled-components";
import brainstormPic from "../public/images/brainstorm.png";

type Props = {
  footerInfo: FooterInfo;
  hero: Hero;
  navigation: Menu[];
  brainstorm: Brainstorm;
};

export default function Home(props: Props) {
  const { footerInfo, hero, navigation, brainstorm } = props;
  const blogs = [
    {
      category: "آموزش",
      title: "نحوه ساخت نمونه اولیه HMI در واقعیت مجازی سه بعدی",
      readTime: 4,
      categoryLink: "/learn",
      url: "/blog/learn-protopie",
      image: "/images/learn-protopite.png",
    },
    {
      category: "آموزش",
      title: "نمونه سازی برای خودرو - مورد استفاده مرسدس",
      readTime: 4,
      categoryLink: "/learn",
      url: "/blog/learn-protopie",
      image: "/images/learn-protopite.png",
    },
    {
      category: "آموزش",
      title: "چگونه داده های واقعی را به نمونه های اولیه خود اضافه کنیم",
      readTime: 4,
      categoryLink: "/learn",
      url: "/blog/learn-protopie",
      image: "/images/learn-protopite.png",
    },
    {
      category: "آموزش",
      title: "چه خبر؟ معرفی فونت های سفارشی",
      readTime: 4,
      categoryLink: "/learn",
      url: "/blog/learn-protopie",
      image: "/images/learn-protopite.png",
    },
  ];
  return (
    <Layout footerInfo={footerInfo} navigation={navigation}>
      <Head>
        <title>Protopie</title>
        {/* <meta name="description" content="Generated by create next app" /> */}
      </Head>
      <Container>
        <Hero data={hero} />
        <Brainstorm column align="center" justify="center" gap={tokens.spacingHorizontalMNudge}>
          <Heading title={brainstorm?.title} subtitle={brainstorm?.subTitle} />
          <Image src={brainstormPic} alt="Brainstorm" />
        </Brainstorm>
        <Flex column align="center" justify="center">
          <Heading title="بلاگ" subtitle="نکات آموزشی، اخبار، ترفند و ..." />
          <Flex>
            {blogs.map((blog, index) => (
              <BlogCard key={`blog-${index}`} {...blog} />
            ))}
          </Flex>
        </Flex>
        <Space></Space>
      </Container>
    </Layout>
  );
}

export async function getServerSideProps() {
  try {
    const homepage = await axios.get(process.env.NEXT_PUBLIC_APP_BASEURL + "/api/homepage");
    const navigation = await axios(process.env.NEXT_PUBLIC_APP_BASEURL + "/api/navigation");
    return {
      props: {
        ...homepage.data,
        navigation: navigation.data,
      },
    };
  } catch (error) {}
}

const Brainstorm = styled(Flex)`
  padding: ${tokens.spacingVerticalXXXL}, 0px, ${tokens.spacingVerticalXXXL}, 0px;
  height: 625px;
  background-image: linear-gradient(rgb(41 41 41 / 50%), rgb(41 41 41 / 50%)), url(images/lines.png);
  box-shadow: inset 0 0 140px 20px ${tokens.colorNeutralBackground1};
`;

const Space = styled.div`
  height: 200px;
  background-image: linear-gradient(rgb(41 41 41 / 50%), rgb(41 41 41 / 50%)), url(images/lines.png);
  margin: ${tokens.spacingVerticalXXXL} 0;
  box-shadow: inset 0 0 140px 20px ${tokens.colorNeutralBackground1};
}
`;
